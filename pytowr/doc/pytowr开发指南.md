# pytowr修改指南
这个文档介绍pytowr的结构, 变量的逻辑关系, 常用的常量设置, 以及我目前想到的问题
## pytowr系统结构
这里的结构按照编译来划分, 整个的结构实际分为如下三层, 他们之间都是独立编译的.
1. python
2. pytowr
3. towr

python 不必多说, 随改随用的脚本语言, 不用编译

### pytowr
pytowr作为python的module和python交互. pytowr的本体是 `pytowr.cpython-*.so`, 也就是如果你想更改属于pytowr的内容, 必须重新编译pytowr, 如果发现改了没用的情况首先检查一下 python 引用的 `pytowr.cpython-*.so` 是不是更新了. 

如果想看你的python调用的是哪一个文件以确保其加载的是最新的文件,可以:
```py
import pytowr
print(pytowr.__file__)
```

pytowr和下面的towr的交互也是通过动态链接的方式, 凡是使用动态链接, 都要确保动态链接库在你链接的路径里面. 如果`libtowr.so` 不在`/lib` 或 `/usr/lib`, 那么请设置 `LD_LIBRARY_PATH`

### towr
这个工程里面towr的主体仍然是人家的, 我仅仅是添加了六足机器人的定义, 一个新的并联constraint, 以及一个用来锁住一些变量的函数.

towr的本体是 `libtowr.so`, 如果改动了任何towr文件夹下面的, 请一定要重新编译towr, 否则没有效果.

## 变量逻辑关系
towr求解的是轨迹, 一个轨迹可以用不同的表示方法在空间中确定. 我觉得一个比较容易混淆的就是真正放在towr里面去求解的变量(咱们称之**轨迹变量**),以及把轨迹按照一段时间间隔取点,形成的一个类似spline一样的东西(咱们称之**轨迹折线**). 

这二者描述的是一样的东西, 但是请注意区分. 比如`pytowr.run`这个函数的返回值分别是: 轨迹折线, 迭代次数, 轨迹变量. 

想象轨迹是空间中的一个三次函数, 轨迹折线相当于是$f(t_0),f(t_1)....f(t_n)$, 我们引导机器人的动作就是使用的轨迹折线

轨迹变量相当于函数的参数$a,b,c,d$, 我们用来设初始值简化计算的就是设置这个东西